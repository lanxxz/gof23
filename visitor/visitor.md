# Visitor 模式(访问者模式)
Visitor 模式将数据结构和处理分离开来。我们编写一个访问者来访问数据结构中的元素，
并把对各元素的处理交给访问者类。这样当需要新的处理时，我们只需要添加访问者类。
## 特点
- 双重委派:由两个角色共同决定了实际进行的处理，这种消息分发机制叫 双重委派(双重分发)
- 数据结构和处理分离
## 解决问题
稳定的数据结构和操作耦合问题
## 优点
- 符合单一职责
- 优秀的扩展性
- 灵活性
- 组件具有独立性
- 符合开闭原则:对扩展开放，对修改关闭
## 缺点
- 集体元素对访问者公布细节，违反了迪米特原则
- 具体元素变更比较困难
- 违反了依赖倒置原则，依赖了具体类，没有依赖抽象
## 使用场景
- 对象结构中对象对应的类很少改变，但经常需要在此对象结构上定义新的操作。
- 需要对一个对象结果中的对象进行很多不同的并且不相关的操作，需要避免这些操作"污染"了这些
对象的类，也不希望在增加新操作时改变了这些类。
## 相关设计模式
- 访问者模式所访问的数据结构采用 [Composite 模式](../composite/composite.md)
- [Iterator 模式](../iterator/Iterator.md) 用于逐个遍历保存在数据结构中元素；Visitor 模式用于对保存在数据结构中的元素进行某种特定的处理
- Interpreter 模式 有时候会使用 访问者模式。例如:生成语法树后可能会使用 访问者模式访问语法树的各个节点进行处理
