# Prototype 模式 (原型模式)
Protetype 模式用于指定创建对象的种类，并通过拷贝原型对象来创建新的对象。  
在运行期建立和删除原型。  
一般和 [factory method 模式](../factory-method/FactoryMethod.md) 一起使用，通过 clone 方法创建一个对象，然后由工厂方法模式提供给调用者。     
## 优点
- 提高性能
- 避免构造函数的约束
## 缺点
- 必须实现 Cloneable 接口
- 克隆方法需要对垒的功能进行通盘考虑
## 场景
- 对象种类繁多，无法整合到一个类中时
- 难以根据类生成实例时(创建出一个跟实例完全一样的实例)
- 解耦框架和生成实例时
- 当一个系统需要独立产品的创建、构建和表示时
- 实例化的类在运行期指定
- 避免创建一个与产品类层次平行的工厂类层次
- 一个类是能有几个不同状态组合中的一种时
## 延伸
### clone 方法
- 要想调用 clone 方法，被复制的对象 __必须__ 实现 `java.lang.Cloneable` 接口
- `clone` 方法的可见范围是 protected，根据需要改为 public
- `clone()` 方法的默认实现是浅拷贝
- `Cloneable` 接口用于标记可以使用 `clone()` 方法进行复制，本身并不声明任何方法。这种接口称为 标记接口
### 浅拷贝和深拷贝
- 浅拷贝：被复制对象的所有值属性都含有与原来对象的相同，而所有的对象引用属性仍然指向原来的对象。
- 深拷贝：在浅拷贝的基础上，所有引用其他对象的变量也进行了clone，并指向被复制过的新对象。
- 浅拷贝一般通过实现 `Cloneable` 接口
- 深拷贝一般通过实现 `Serializable` 接口读取二进制流